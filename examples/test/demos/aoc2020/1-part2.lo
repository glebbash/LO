@include("../../../lib/cli.lo")
@include("../../../lib/fs.lo")

fn main() {
    let input = fs::read_file!("./examples/test/demos/aoc2020/1.txt")
    defer input.free()

    let numbers = parse_numbers(input)
    defer numbers.free()

    for i in 0..numbers.len {
        let a = numbers.get!(i)

        for j in i + 1..numbers.len {
            let b = numbers.get!(j)

            for k in j + 1..numbers.len {
                let c = numbers.get!(k)

                if a + b + c == 2020 {
                    println((a * b * c).to_tmp_str!())
                    return
                }
            }
        }
    }
}

fn parse_numbers(input: String): &Vec(u32) {
    let numbers = Vec::new!<u32>()
    let current_number = 0

    for i in 0..input.len() {
        let c = input.char_at(i)
        if c >= '0' && c <= '9' {
            current_number *= 10
            current_number += (c - '0') as u32
        }
        if c == '\n' {
            numbers.push!(current_number)
            current_number = 0
        }
    }

    return numbers
}
