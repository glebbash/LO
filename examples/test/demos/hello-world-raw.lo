export memory { min_pages: 1, data_start: 12 }

import from "wasi_snapshot_preview1" {
    fn fd_write(fd: u32, iovs: &void, iovs_len: u32, nwritten: &u32): u32
}

type str = struct {
    data: u32,
    size: u32,
}
inline let message = "Hello World!\n"

export fn _start() {
    let nwritten = 0 as &u32

    let iovs = 4 as &str
    *iovs = message

    let _ = fd_write(1, iovs, 1, nwritten)
}
