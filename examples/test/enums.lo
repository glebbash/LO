include "../lib/cli.lo"

enum Expr {
    Binary(&ExprBinary),
    Item(&ExprItem),
}

struct ExprBinary {
    operator: str,
    lhs: Expr,
    rhs: Expr,
}

struct ExprItem {
    name: str,
}

fn main() {
    let expr = Expr::Binary(heap::new!(.ExprBinary {
        operator: "+",
        lhs: Expr::Item(heap::new!(.ExprItem { name: "a" })),
        rhs: Expr::Item(heap::new!(.ExprItem { name: "b" })),
    }))

    if match Expr::Binary(bin) = expr {
        print(bin.operator)

        match Expr::Item(item) = bin.lhs else {
            @unreachable()
        }
        println(item.name)
    }
}
