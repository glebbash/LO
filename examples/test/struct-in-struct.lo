include "../lib/cli.lo"

struct Point2D {
    x: u32,
    y: u32,
}

struct Rect {
    tl: Point2D,
    br: Point2D,
}

fn main() {
    let r = .Rect {
        tl: .Point2D { x: 1, y: 2 },
        br: .Point2D { x: 3, y: 4 },
    }
    let br = r.br
    puts(br.x.to_tmp_str!())
    puts("\n")

    puts(r.br.x.to_tmp_str!())
    puts("\n")

    let r_ref = tmp_alloc!<Rect>()
    *r_ref = r
    let r2 = *r_ref
    puts(r2.br.x.to_tmp_str!())
    puts("\n")

    let br2 = r_ref.br
    puts(br2.x.to_tmp_str!())
    puts("\n")

    let br_ref = (r_ref as u32 + sizeof Point2D) as &Point2D
    puts(br_ref.x.to_tmp_str!())
    puts("\n")

    puts((*br_ref).x.to_tmp_str!())
    puts("\n")

    puts(r_ref.br.x.to_tmp_str!())
    puts("\n")
}
